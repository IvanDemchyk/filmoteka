!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=e.parcelRequired7c6;null==a&&((a=function(t){if(t in n)return n[t].exports;if(t in o){var e=o[t];delete o[t];var a={id:t,exports:{}};return n[t]=a,e.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){o[t]=e},e.parcelRequired7c6=a);var r="genresList";function i(t){var e=t.map((function(t){return JSON.parse(localStorage.getItem(r))[t]}));return e.length>2&&(e.splice(2,e.length-2),e.push("other")),e}function c(t){return t.map((function(t){var e=t.poster_path,n=t.original_title,o=t.title,a=t.genre_ids,r=t.overview,c=t.release_date,l=t.id;return'<li class="card__item list" id="'.concat(l,'">\n            <img src="https://image.tmdb.org/t/p/w500/').concat(e,'" loading="lazy" alt="').concat(r,'" class="card__img" />\n            <h2 class="card__title">').concat(null!=o?o:n,'</h2>\n            <p class="card__desc">').concat(i(a).join(", ")," | ").concat(c.substr(0,4),"\n            </p>\n            </li>")})).join("")}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=e8369cced440ebe3b010b622661df24b&language=en-US").then((function(t){return t.json()})).then((function(t){var e=t.genres.reduce((function(t,e){var n=e.id,o=e.name;return t[n]=o,t}),{});localStorage.setItem(r,JSON.stringify(e))}));var l=a("bpxeT"),d=a("2TvXO"),s=a("dIxxU"),u="https://api.themoviedb.org/3/",m="0b11624b950ea9c4284f61844023b09c";function p(t,e){return v.apply(this,arguments)}function v(){return(v=t(l)(t(d).mark((function e(n,o){var a;return t(d).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.default.get("".concat(u,"trending/movie/week?api_key=").concat(m,"&page=").concat(n));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:throw t.prev=7,t.t0=t.catch(0),new Error(response.statusText);case 10:case"end":return t.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}a("Ur9Nn");var f=a("Ur9Nn"),_=(l=a("bpxeT"),d=a("2TvXO"),a("4cG42"));f=a("Ur9Nn"),f=a("Ur9Nn");function g(t){localStorage.setItem(f.CURRENT_MOVIES,JSON.stringify(t)),f.card.innerHTML=c(JSON.parse(localStorage.getItem(f.CURRENT_MOVIES)).results)}var h=document.querySelector(".js-pagination");function b(t,e){var n="",o=t-1,a=t+1,r=t+2;t,t>1&&(n+="<li class=' arrows'>&#129144;</li>",n+='<li class="firstInt">1</li>'),t>4&&(n+='<li class="dots">...</li>'),t>3&&(n+='<li class="two-left">'.concat(t-2,"</li>")),t>2&&(n+="<li>".concat(o,"</li>")),n+="<li class='active'>".concat(t,"</li>"),e-1>t&&(n+="<li >".concat(a,"</li>")),e-2>t&&(n+="<li >".concat(r,"</li>")),e-3>t&&(n+='<li class="dots">...</li>'),e>t&&(n+='<li class="lastInt">'.concat(e,"</li>"),n+="<li class=' arrows'>&#129146</li>"),h.innerHTML=n}var x=document.querySelector(".preloader");function w(){x.style.display="flex"}function y(){setTimeout((function(){x.style.display="none"}),500)}var E,S=document.querySelector(".form-js"),T=document.querySelector(".form-input"),k=document.querySelector(".form__notification");function N(){return(N=t(l)(t(d).mark((function e(n){var o,a;return t(d).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),o=T.value.trim()){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,_.fetchMovies)(1,o);case 7:if(0!==(a=t.sent).results.length){t.next=12;break}return k.style.visibility="visible",setTimeout((function(){k.style.visibility="hidden"}),5e3),t.abrupt("return");case 12:a.page,w(),g(a),window.onload=y(),E=o,b(a.page,a.total_pages),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(4),console.log("Error");case 24:case"end":return t.stop()}}),e,null,[[4,20]])})))).apply(this,arguments)}S.addEventListener("submit",(function(t){return N.apply(this,arguments)}));f=a("Ur9Nn");var q=document.querySelector(".backdrop"),O=document.querySelector(".modal-window");function C(t,e,n){var o=Number(t.target.closest(e).id);return JSON.parse(localStorage.getItem(n)).results.find((function(t){return t.id===o}))}var I={onBackdropClick:function(t){"BODY"===t.target.parentElement.nodeName&&(q.hidden=!0,q.removeEventListener("click",this.onBackdropClick))},onEsc:function(t){"Escape"===t.code&&(q.hidden=!0,document.removeEventListener("keydown",this.onEsc))},onCloseBtn:function(){q.hidden=!0}},U={toWatched:function(t){"add to watched"===t.currentTarget.textContent?L(t,".modal__movie",f.CURRENT_MOVIES,f.watche,f.WATCHE,"watched"):M(t,".modal__movie",f.watche,f.WATCHE,"watched")},toQueue:function(t){"add to queue"===t.currentTarget.textContent?L(t,".modal__movie",f.CURRENT_MOVIES,f.queue,f.QUEUE,"queue"):M(t,".modal__movie",f.queue,f.QUEUE,"queue")}};function L(t,e,n,o,a,r){var i=C(t,e,n);o.push(i),localStorage.setItem(a,JSON.stringify(o)),t.currentTarget.textContent="remove from ".concat(r)}function M(t,e,n,o,a){var r=JSON.parse(localStorage.getItem(o)),i=Number(t.target.closest(e).id);r.forEach((function(t,e){t.id===i&&n.splice(e,1)})),localStorage.setItem(o,JSON.stringify(n)),t.currentTarget.textContent="add to ".concat(a)}function R(t,e){if(0!==t.length)return t.find((function(t){return t.id===e.id}))}f.card.addEventListener("click",(function(t){var e,n,o,a,i=C(t,".card__item",f.CURRENT_MOVIES),c=R(f.watche,i),l=R(f.queue,i);!function(t,e,n,o){var a='<button class="modal-window__close-btn">close</button>\n\n    <div class="modal__movie" id=\''.concat(t.id,"'><img class='movie__img' alt=\"movie poster\" src=\"https://image.tmdb.org/t/p/w500/").concat(t.poster_path,'"/>\n      <div class="movie__info">\n      <h2 class="movie__title">').concat(t.title,'</h2>\n      <table class="movie__details">\n      <tbody>\n      <tr>\n      <td class=\'movie__detail modal-text--left-column modal-text\'>Vote/Votes</td>\n      <td class="movie__detail modal-text modal-text--line-high">\n      <span class="movie__detail--accent">\n      ').concat(t.vote_average.toFixed(1)," </span\n      >/ ").concat(t.vote_count,'\n      </td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Popularity</td>\n      <td class="movie__detail modal-text modal-text--line-high">').concat(t.popularity.toFixed(1),'</td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Original title</td>\n      <td class="movie__detail modal-text modal-text--uppercase">').concat(t.original_title,'</td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Genres</td>\n      <td class="movie__detail modal-text">').concat(function(t,e){return t.map((function(t){return JSON.parse(localStorage.getItem(e))[t]})).join(", ")}(t.genre_ids,e),'</td>\n      </tr>\n          </tbody>\n          </table>\n          \n          <h3 class="movie__about modal-text modal-text--uppercase">About</h3>\n      <p class="movie__description modal-text">').concat(t.overview,'</p>\n      <div class="movie__add-buttons">\n        <button class="movie__add-btn modal-text modal-text--uppercase js-movie__add-btn--watched">').concat(n?"remove from ":"add to ",'watched</button>\n        <button class="movie__add-btn modal-text modal-text--uppercase js-movie__add-btn--queue">').concat(o?"remove from ":"add to ","queue</button>\n      </div><button data-movie-id='").concat(t.id,"'>Trailer</button>\n      </div></div>\n  ");O.innerHTML=a}(i,r,c,l),e=I,n=U,o=document.querySelector(".modal-window__close-btn"),(a={addToWatched:document.querySelector(".js-movie__add-btn--watched"),addToQueue:document.querySelector(".js-movie__add-btn--queue")}).addToWatched.addEventListener("click",n.toWatched),a.addToQueue.addEventListener("click",n.toQueue),o.addEventListener("click",e.onCloseBtn),q.addEventListener("click",e.onBackdropClick),document.addEventListener("keydown",e.onEsc),q.hidden=!1}));l=a("bpxeT"),d=a("2TvXO"),_=a("4cG42");var j,J=document.querySelector(".js-pagination");function V(){return B.apply(this,arguments)}function B(){return B=t(l)(t(d).mark((function e(){var n,o,a=arguments;return t(d).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:1,console.log(E),!E){t.next=11;break}return t.next=6,(0,_.fetchMovies)(n,E);case 6:return o=t.sent,j=o.page,t.abrupt("return",o);case 11:return w(),t.next=14,p(n);case 14:return o=t.sent,window.onload=y(),j=o.page,t.abrupt("return",o);case 18:case"end":return t.stop()}}),e)}))),B.apply(this,arguments)}V().then((function(t){w(),g(t),j=t.page,window.onload=y(),b(t.page,t.total_pages)})),J.addEventListener("click",(function(t){if("LI"!==t.target.nodeName)return;if("..."===t.target.textContent)return;if("ðŸ¡¸"===t.target.textContent)V(j-=1).then((function(t){g(t),b(t.page,t.total_pages)}));else if("ðŸ¡º"===t.target.textContent)V(j+=1).then((function(t){g(t),b(t.page,t.total_pages)}));else{V(t.target.textContent).then((function(t){g(t),b(t.page,t.total_pages)}))}}))}();
//# sourceMappingURL=index.450042e4.js.map
