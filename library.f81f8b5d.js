var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var i={id:e,exports:{}};return t[e]=i,n.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},e.parcelRequired7c6=n),n("9eEKU");function i(e){const t=e.map((e=>JSON.parse(localStorage.getItem("genresList"))[e]));return t.length>2&&(t.splice(2,t.length-2),t.push("Other")),t}function o(e){return e.map((({poster_path:e,original_title:t="",title:a="",genre_ids:n=["no info"],overview:o="",release_date:s="......",id:r=""})=>{let d;d=e?"https://image.tmdb.org/t/p/w500/"+e:"https://picsum.photos/500/750";return`<li class="card__item list" id="${r}">\n            <img src='${d}' loading="lazy" alt="${o}" class="card__img" />\n            <h2 class="card__title">${a??t}</h2>\n            <p class="card__desc">${i(n).join(", ")} | ${s.substr(0,4)}\n            </p>\n            </li>`})).join("")}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=e8369cced440ebe3b010b622661df24b&language=en-US").then((e=>e.json())).then((function(e){const t=e.genres.reduce(((e,{id:t,name:a})=>(e[t]=a,e)),{});localStorage.setItem("genresList",JSON.stringify(t))}));var s=n("9eEKU");s=n("9eEKU");const r=document.querySelector(".js-pagination-lib");class d{paginate(e,t,a){return e.slice((t-1)*a,t*a)}paginationRender(){this.arr.length<5?s.card.innerHTML=$(this.arr):(this.pagedArr=this.paginate(this.arr,this.pageNum,this.pageSize),s.card.innerHTML=$(this.pagedArr),l(this.pageNum,this.pageAll))}pagLeft(){this.pageNum-=1,this.pagedArr=this.paginate(this.arr,this.pageNum,this.pageSize),s.card.innerHTML=$(this.pagedArr),l(this.pageNum,this.pageAll)}pagRight(){this.pageNum+=1,this.pagedArr=this.paginate(this.arr,this.pageNum,this.pageSize),s.card.innerHTML=$(this.pagedArr),l(this.pageNum,this.pageAll)}peakedPage(e){this.pageNum=Number(e),this.pagedArr=this.paginate(this.arr,this.pageNum,this.pageSize),s.card.innerHTML=$(this.pagedArr),l(this.pageNum,this.pageAll)}constructor(e){this.arr=e,this.pageNum=1,this.pageAll=Math.round((this.arr.length-1)/5),this.pageSize=5,this.pagedArr}}function l(e,t){let a="";e>1&&(a+="<li class='arrows arrow-left'>&#129144;</li>",a+='<li class="firstInt">1</li>'),e>4&&(a+='<li class="dots">...</li>'),e>3&&(a+=`<li class="two-left">${e-2}</li>`),e>2&&(a+=`<li>${e-1}</li>`),a+=`<li class='active'>${e}</li>`,t-1>e&&(a+=`<li >${e+1}</li>`),t-2>e&&(a+=`<li >${e+2}</li>`),t-3>e&&(a+='<li class="dots">...</li>'),t>e&&(a+=`<li class="lastInt">${t}</li>`,a+="<li class='arrows arrow-right'>&#129146</li>"),r.innerHTML=a}s=n("9eEKU"),s=n("9eEKU");const c=document.querySelector(".watched-btn-js"),u=(document.querySelector(".queue-btn-js"),document.querySelector(".library-header__buttons")),m=JSON.parse(localStorage.getItem(s.CURRENT_MOVIES)).results,g=new d(m),p=new d(m);function h(e,t,a){a.classList.add(e),t.classList.remove(e)}u.addEventListener("click",(function({target:e}){if(!e.classList.contains("library-header__btn"))return;e.classList.contains("queue-btn-js")&&(s.card.innerHTML="",p.paginationRender(),h("active",c,e));e.classList.contains("watched-btn-js")&&(s.card.innerHTML="",g.paginationRender(),h("active",c,e))})),r.addEventListener("click",(function(e){const t=Boolean(document.querySelector(".watched-btn-js.active")),a=e.target.textContent;if("LI"!==e.target.nodeName||"..."===a)return;"ðŸ¡¸"===a?t?g.pagLeft():p.pagLeft():"ðŸ¡º"===a?t?g.pagRight():p.pagRight():t?g.peakedPage(a):p.peakedPage(a)}));s=n("9eEKU");const _=document.querySelector(".backdrop"),v=document.querySelector(".modal-window"),f=document.querySelector(".watched-btn-js");document.querySelector(".queue-btn-js");function b(e,t,a){const n=Number(e.target.closest(t).id);return JSON.parse(localStorage.getItem(a)).results.find((e=>e.id===n))}function S(e,t,a,n){const i=`<button class="modal-window__close-btn">close</button>\n\n    <div class="modal__movie" id='${e.id}'><img class='movie__img' alt="movie poster" src="https://image.tmdb.org/t/p/w500/${e.poster_path}"/>\n      <div class="movie__info">\n      <h2 class="movie__title">${e.title}</h2>\n      <table class="movie__details">\n      <tbody>\n      <tr>\n      <td class='movie__detail modal-text--left-column modal-text'>Vote/Votes</td>\n      <td class="movie__detail modal-text modal-text--line-high">\n      <span class="movie__detail--accent">\n      ${e.vote_average.toFixed(1)} </span\n      >/ ${e.vote_count}\n      </td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Popularity</td>\n      <td class="movie__detail modal-text modal-text--line-high">${e.popularity.toFixed(1)}</td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Original title</td>\n      <td class="movie__detail modal-text modal-text--uppercase">${e.original_title}</td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Genres</td>\n      <td class="movie__detail modal-text">${function(e,t){return e.map((e=>JSON.parse(localStorage.getItem(t))[e])).join(", ")}(e.genre_ids,t)}</td>\n      </tr>\n          </tbody>\n          </table>\n          \n          <h3 class="movie__about modal-text modal-text--uppercase">About</h3>\n      <p class="movie__description modal-text">${e.overview}</p>\n      <div class="movie__add-buttons">\n        <button class="movie__add-btn modal-text modal-text--uppercase js-movie__add-btn--watched">${a?"remove from ":"add to "}watched</button>\n        <button class="movie__add-btn modal-text modal-text--uppercase js-movie__add-btn--queue">${n?"remove from ":"add to "}queue</button>\n      </div><button data-movie-id='${e.id}'>Trailer</button>\n      </div></div>\n  `;v.innerHTML=i}const E={onBackdropClick(e){"BODY"===e.target.parentElement.nodeName&&(_.hidden=!0,_.removeEventListener("click",this.onBackdropClick))},onEsc(e){"Escape"===e.code&&(_.hidden=!0,document.removeEventListener("keydown",this.onEsc))},onCloseBtn(){_.hidden=!0}},L={toWatched(e){"add to watched"===e.currentTarget.textContent?w(e,".modal__movie",s.CURRENT_MOVIES,s.watche,s.WATCHE,"watched"):y(e,".modal__movie",s.watche,s.WATCHE,"watched")},toQueue(e){"add to queue"===e.currentTarget.textContent?w(e,".modal__movie",s.CURRENT_MOVIES,s.queue,s.QUEUE,"queue"):y(e,".modal__movie",s.queue,s.QUEUE,"queue")}};function w(e,t,a,n,i,o){const s=b(e,t,a);n.push(s),localStorage.setItem(i,JSON.stringify(n)),e.currentTarget.textContent=`remove from ${o}`}function y(e,t,a,n,i){const o=JSON.parse(localStorage.getItem(n)),s=Number(e.target.closest(t).id);o.forEach(((e,t)=>{e.id===s&&a.splice(t,1)})),localStorage.setItem(n,JSON.stringify(a)),e.currentTarget.textContent=`add to ${i}`}function x(e,t){const a=document.querySelector(".modal-window__close-btn"),n={addToWatched:document.querySelector(".js-movie__add-btn--watched"),addToQueue:document.querySelector(".js-movie__add-btn--queue")};n.addToWatched.addEventListener("click",t.toWatched),n.addToQueue.addEventListener("click",t.toQueue),a.addEventListener("click",e.onCloseBtn),_.addEventListener("click",e.onBackdropClick),document.addEventListener("keydown",e.onEsc)}function N(e,t){if(0!==e.length)return e.find((e=>e.id===t.id))}const q=document.querySelector("#main"),T=document.querySelector(".library-header");function $(e){return e&&e.length?(T.classList.remove("library-header-notification"),q.classList.remove("notification-bcg"),o(e)):(q.classList.add("notification-bcg"),T.classList.add("library-header-notification"),'<p class="notification-desc">\n            Nothing here yet, go back and select a movie.\n            </p>')}g.paginationRender(),s.card.addEventListener("click",(function(e){const t=function(e,t,a){const n=Number(e.target.closest(t).id);return JSON.parse(localStorage.getItem(a)).find((e=>e.id===n))}(e,".card__item",f.classList.contains("active")?s.WATCHE:s.QUEUE);S(t,"genresList",N(s.watche,t),N(s.queue,t)),x(E,L),_.hidden=!1}));const k=document.querySelector(".watched-btn-js"),j=document.querySelector(".queue-btn-js");j.addEventListener("click",(function(){j.classList.add("active"),k.classList.remove("active")}));
//# sourceMappingURL=library.f81f8b5d.js.map
