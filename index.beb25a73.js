var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){o[e]=t},e.parcelRequired7c6=n);function a(e){const t=e.map((e=>JSON.parse(localStorage.getItem("genresList"))[e]));return t.length>2?(t.splice(2,t.length-2),t.push("Other")):0===t.length&&t.push("no genres"),t}function l(e){return e.map((({poster_path:e,original_title:t="",title:o="",genre_ids:n,overview:l="",release_date:i="",id:s=Date.now()})=>{let c,r;c=""===i?"no date":i.substr(0,4),r=e?"https://image.tmdb.org/t/p/w500/"+e:"https://picsum.photos/500/750";return`<li class="card__item list" id="${s}">\n            <img src='${r}' loading="lazy" alt="${l}" class="card__img" />\n            <h2 class="card__title">${o??t}</h2>\n            <p class="card__desc">${a(n).join(", ")} | ${c}\n            </p>\n            </li>`})).join("")}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=e8369cced440ebe3b010b622661df24b&language=en-US").then((e=>e.json())).then((function(e){const t=e.genres.reduce(((e,{id:t,name:o})=>(e[t]=o,e)),{});localStorage.setItem("genresList",JSON.stringify(t))})),n("b4t8q");const i=JSON.parse(localStorage.getItem("watche"))||[],s=JSON.parse(localStorage.getItem("queue"))||[],c=document.querySelector(".card");document.querySelector(".form-js"),document.querySelector(".form-input"),document.querySelector(".form__notification");const r=document.querySelector(".backdrop"),d=document.querySelector(".modal-window");document.querySelector(".watched-btn-js"),document.querySelector(".queue-btn-js");function u(e,t,o){const n=Number(e.target.closest(t).id);return JSON.parse(localStorage.getItem(o)).results.find((e=>e.id===n))}function m(e,t,o,n){const a=`<button class="modal-window__close-btn">close</button>\n\n    <div class="modal__movie" id='${e.id}'><img class='movie__img' alt="movie poster" src="https://image.tmdb.org/t/p/w500/${e.poster_path}"/>\n      <div class="movie__info">\n      <h2 class="movie__title">${e.title}</h2>\n      <table class="movie__details">\n      <tbody>\n      <tr>\n      <td class='movie__detail modal-text--left-column modal-text'>Vote/Votes</td>\n      <td class="movie__detail modal-text modal-text--line-high">\n      <span class="movie__detail--accent">\n      ${e.vote_average.toFixed(1)} </span\n      >/ ${e.vote_count}\n      </td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Popularity</td>\n      <td class="movie__detail modal-text modal-text--line-high">${e.popularity.toFixed(1)}</td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Original title</td>\n      <td class="movie__detail modal-text modal-text--uppercase">${e.original_title}</td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Genres</td>\n      <td class="movie__detail modal-text">${function(e,t){return e.map((e=>JSON.parse(localStorage.getItem(t))[e])).join(", ")}(e.genre_ids,t)}</td>\n      </tr>\n          </tbody>\n          </table>\n          \n          <h3 class="movie__about modal-text modal-text--uppercase">About</h3>\n      <p class="movie__description modal-text">${e.overview}</p>\n      <div class="movie__add-buttons">\n        <button class="movie__add-btn modal-text modal-text--uppercase js-movie__add-btn--watched">${o?"remove from ":"add to "}watched</button>\n        <button class="movie__add-btn modal-text modal-text--uppercase js-movie__add-btn--queue">${n?"remove from ":"add to "}queue</button>\n      </div><button data-movie-id='${e.id}'>Trailer</button>\n      </div></div>\n  `;d.innerHTML=a}const g={onBackdropClick(e){"BODY"===e.target.parentElement.nodeName&&(r.hidden=!0,r.removeEventListener("click",this.onBackdropClick))},onEsc(e){"Escape"===e.code&&(r.hidden=!0,document.removeEventListener("keydown",this.onEsc))},onCloseBtn(){r.hidden=!0}},h={toWatched(e){"add to watched"===e.currentTarget.textContent?_(e,".modal__movie","current_movies",i,"watche","watched"):p(e,".modal__movie",i,"watche","watched")},toQueue(e){"add to queue"===e.currentTarget.textContent?_(e,".modal__movie","current_movies",s,"queue","queue"):p(e,".modal__movie",s,"queue","queue")}};function _(e,t,o,n,a,l){const i=u(e,t,o);n.push(i),localStorage.setItem(a,JSON.stringify(n)),e.currentTarget.textContent=`remove from ${l}`}function p(e,t,o,n,a){const l=JSON.parse(localStorage.getItem(n)),i=Number(e.target.closest(t).id);l.forEach(((e,t)=>{e.id===i&&o.splice(t,1)})),localStorage.setItem(n,JSON.stringify(o)),e.currentTarget.textContent=`add to ${a}`}function v(e,t){const o=document.querySelector(".modal-window__close-btn"),n={addToWatched:document.querySelector(".js-movie__add-btn--watched"),addToQueue:document.querySelector(".js-movie__add-btn--queue")};n.addToWatched.addEventListener("click",t.toWatched),n.addToQueue.addEventListener("click",t.toQueue),o.addEventListener("click",e.onCloseBtn),r.addEventListener("click",e.onBackdropClick),document.addEventListener("keydown",e.onEsc)}function f(e,t){if(0!==e.length)return e.find((e=>e.id===t.id))}function y(e){localStorage.setItem("current_movies",JSON.stringify(e)),c.innerHTML=l(JSON.parse(localStorage.getItem("current_movies")).results)}c.addEventListener("click",(function(e){const t=u(e,".card__item","current_movies");m(t,"genresList",f(i,t),f(s,t)),v(g,h),r.hidden=!1}));var b=n("2shzp");async function w(e,t,o){try{return(await b.default.get(`https://api.themoviedb.org/3/search/movie?api_key=0b11624b950ea9c4284f61844023b09c&query=${t}&page=${e}$language=${o}`)).data}catch(e){throw new Error(response.statusText)}}var S=n("b4t8q");const L=document.querySelector(".theme__control"),k=document.querySelector(".toolbar");document.querySelector(".js-pagination");let x,q=localStorage.getItem("theme");!function(){if(null===q)return;"light-theme"===q?(document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"),L.classList.remove("checked")):(document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme"),L.classList.add("checked"))}(),k.addEventListener("click",(function(e){e.target.classList.contains("theme__control")&&L.classList.toggle("checked");L.classList.contains("checked")?(document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme"),localStorage.setItem("theme","dark-theme")):(document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"),localStorage.setItem("theme","light-theme"))}));const $=document.querySelector(".js-pagination");function E(e,t){let o="",n=e-2,a=e-1,l=e+1,i=e+2;if(x=JSON.parse(localStorage.getItem("current_movies")).page,e>1&&(o+="<li class='arrows'>ðŸ¡¸</li>",o+="<li class='firstInt'>1</li>"),e>4&&(o+="<li class='dots'>...</li>"),e>3&&(o+=`<li class='two-left'>${n}</li>`),e>2&&(o+=`<li>${a}</li>`),o+=`<li class='active'>${e}</li>`,t-1>e&&(o+=`<li >${l}</li>`),t-2>e&&(o+=`<li >${i}</li>`),t-3>e&&(o+="<li class='dots'>...</li>"),t>e&&(o+=`<li class='lastInt'>${t}</li>`,o+="<li class='arrows'>ðŸ¡º</li>"),$.innerHTML=o,L.classList.contains("checked")){[...$.children].forEach((e=>{e.classList.toggle("dark")}))}}let I=document.querySelector(".preloader");function T(){I.style.display="flex"}function N(){setTimeout((()=>{I.style.display="none"}),500)}const O=document.querySelector(".js-pagination"),j=document.querySelector(".form-js"),C=document.querySelector(".form-input"),J=document.querySelector(".form__notification");let B,D=1;async function M(e=1){let t;return B?(T(),t=await w(e,B),D=t.page,window.onload=N(),t):(T(),t=await(0,S.fetchTrends)(e),window.onload=N(),D=t.page,t)}j.addEventListener("submit",(async function(e){e.preventDefault();let t=C.value.trim();if(!t)return;try{const e=await w(1,t);if(0===e.results.length)return J.style.visibility="visible",void setTimeout((()=>{J.style.visibility="hidden"}),5e3);D=e.page,T(),y(e),window.onload=N(),B=t,E(e.page,e.total_pages)}catch(e){console.log("Error"),errorMsg}})),M().then((e=>{T(),y(e),D=e.page,window.onload=N(),E(e.page,e.total_pages)})),O.addEventListener("click",(function(e){if("LI"!==e.target.nodeName)return;if("..."===e.target.textContent)return;if("ðŸ¡¸"===e.target.textContent)console.log("Arrov<-",D),M(D-=1).then((e=>{y(e),E(e.page,e.total_pages)}));else if("ðŸ¡º"===e.target.textContent)console.log("Arrov>-",D),M(D+=1).then((e=>{y(e),E(e.page,e.total_pages)}));else{const t=e.target.textContent;console.log("in current - ",D),M(t).then((e=>{y(e),E(e.page,e.total_pages)}))}}));const H=document.querySelector(".btn-up");H.addEventListener("click",(function e(){let t=window.scrollY/20;window.scrollY>0&&(window.scrollBy(0,-t),setTimeout(e,0))})),window.addEventListener("scroll",(function(){let e=window.scrollY,t=document.documentElement.clientHeight;e<t?H.classList.add("show"):H.classList.remove("show")}));const Q=document.querySelector(".lang__control"),W=document.querySelector(".lang");let Y;let A=localStorage.getItem("language");!function(){if(null===A)return;"english"===A?(Y="en",Q.classList.remove("checked")):(Y="uk",Q.classList.add("checked"))}(),W.addEventListener("click",(function(e){e.target.classList.contains("lang__control")&&Q.classList.toggle("checked");Q.classList.contains("checked")?(Y="en",localStorage.setItem("language","ukranian")):(Y="uk",localStorage.setItem("language","english"))}));
//# sourceMappingURL=index.beb25a73.js.map
