!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=e.parcelRequired7c6;null==a&&((a=function(t){if(t in n)return n[t].exports;if(t in o){var e=o[t];delete o[t];var a={id:t,exports:{}};return n[t]=a,e.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){o[t]=e},e.parcelRequired7c6=a);var r="genresList";function i(t){var e=t.map((function(t){return JSON.parse(localStorage.getItem(r))[t]}));return e.length>2&&(e.splice(2,e.length-2),e.push("Other")),e}function c(t){return t.map((function(t){var e,n=t.poster_path,o=t.original_title,a=void 0===o?"":o,r=t.title,c=void 0===r?"":r,l=t.genre_ids,d=void 0===l?["no info"]:l,s=t.overview,u=void 0===s?"":s,m=t.release_date,p=void 0===m?"......":m,v=t.id;e=n?"https://image.tmdb.org/t/p/w500/"+n:"https://picsum.photos/500/750";return'<li class="card__item list" id="'.concat(void 0===v?"":v,"\">\n            <img src='").concat(e,'\' loading="lazy" alt="').concat(u,'" class="card__img" />\n            <h2 class="card__title">').concat(null!=c?c:a,'</h2>\n            <p class="card__desc">').concat(i(d).join(", ")," | ").concat(p.substr(0,4),"\n            </p>\n            </li>")})).join("")}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=e8369cced440ebe3b010b622661df24b&language=en-US").then((function(t){return t.json()})).then((function(t){var e=t.genres.reduce((function(t,e){var n=e.id,o=e.name;return t[n]=o,t}),{});localStorage.setItem(r,JSON.stringify(e))}));var l=a("bpxeT"),d=a("2TvXO"),s=a("dIxxU"),u="https://api.themoviedb.org/3/",m="0b11624b950ea9c4284f61844023b09c";function p(t,e){return v.apply(this,arguments)}function v(){return(v=t(l)(t(d).mark((function e(n,o){var a;return t(d).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s.default.get("".concat(u,"trending/movie/week?api_key=").concat(m,"&page=").concat(n));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:throw t.prev=7,t.t0=t.catch(0),new Error(response.statusText);case 10:case"end":return t.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}a("Ur9Nn");var f=a("Ur9Nn"),_=(document.querySelector(".form-js"),document.querySelector(".form-input"),document.querySelector(".form__notification"),f=a("Ur9Nn"),document.querySelector(".backdrop")),g=document.querySelector(".modal-window");document.querySelector(".watched-btn-js"),document.querySelector(".queue-btn-js");function h(t,e,n){var o=Number(t.target.closest(e).id);return JSON.parse(localStorage.getItem(n)).results.find((function(t){return t.id===o}))}function b(t,e,n,o){var a='<button class="modal-window__close-btn">close</button>\n\n    <div class="modal__movie" id=\''.concat(t.id,"'><img class='movie__img' alt=\"movie poster\" src=\"https://image.tmdb.org/t/p/w500/").concat(t.poster_path,'"/>\n      <div class="movie__info">\n      <h2 class="movie__title">').concat(t.title,'</h2>\n      <table class="movie__details">\n      <tbody>\n      <tr>\n      <td class=\'movie__detail modal-text--left-column modal-text\'>Vote/Votes</td>\n      <td class="movie__detail modal-text modal-text--line-high">\n      <span class="movie__detail--accent">\n      ').concat(t.vote_average.toFixed(1)," </span\n      >/ ").concat(t.vote_count,'\n      </td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Popularity</td>\n      <td class="movie__detail modal-text modal-text--line-high">').concat(t.popularity.toFixed(1),'</td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Original title</td>\n      <td class="movie__detail modal-text modal-text--uppercase">').concat(t.original_title,'</td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Genres</td>\n      <td class="movie__detail modal-text">').concat(function(t,e){return t.map((function(t){return JSON.parse(localStorage.getItem(e))[t]})).join(", ")}(t.genre_ids,e),'</td>\n      </tr>\n          </tbody>\n          </table>\n          \n          <h3 class="movie__about modal-text modal-text--uppercase">About</h3>\n      <p class="movie__description modal-text">').concat(t.overview,'</p>\n      <div class="movie__add-buttons">\n        <button class="movie__add-btn modal-text modal-text--uppercase js-movie__add-btn--watched">').concat(n?"remove from ":"add to ",'watched</button>\n        <button class="movie__add-btn modal-text modal-text--uppercase js-movie__add-btn--queue">').concat(o?"remove from ":"add to ","queue</button>\n      </div><button data-movie-id='").concat(t.id,"'>Trailer</button>\n      </div></div>\n  ");g.innerHTML=a}var x={onBackdropClick:function(t){"BODY"===t.target.parentElement.nodeName&&(_.hidden=!0,_.removeEventListener("click",this.onBackdropClick))},onEsc:function(t){"Escape"===t.code&&(_.hidden=!0,document.removeEventListener("keydown",this.onEsc))},onCloseBtn:function(){_.hidden=!0}},w={toWatched:function(t){"add to watched"===t.currentTarget.textContent?y(t,".modal__movie",f.CURRENT_MOVIES,f.watche,f.WATCHE,"watched"):S(t,".modal__movie",f.watche,f.WATCHE,"watched")},toQueue:function(t){"add to queue"===t.currentTarget.textContent?y(t,".modal__movie",f.CURRENT_MOVIES,f.queue,f.QUEUE,"queue"):S(t,".modal__movie",f.queue,f.QUEUE,"queue")}};function y(t,e,n,o,a,r){var i=h(t,e,n);o.push(i),localStorage.setItem(a,JSON.stringify(o)),t.currentTarget.textContent="remove from ".concat(r)}function S(t,e,n,o,a){var r=JSON.parse(localStorage.getItem(o)),i=Number(t.target.closest(e).id);r.forEach((function(t,e){t.id===i&&n.splice(e,1)})),localStorage.setItem(o,JSON.stringify(n)),t.currentTarget.textContent="add to ".concat(a)}function E(t,e){var n=document.querySelector(".modal-window__close-btn"),o={addToWatched:document.querySelector(".js-movie__add-btn--watched"),addToQueue:document.querySelector(".js-movie__add-btn--queue")};o.addToWatched.addEventListener("click",e.toWatched),o.addToQueue.addEventListener("click",e.toQueue),n.addEventListener("click",t.onCloseBtn),_.addEventListener("click",t.onBackdropClick),document.addEventListener("keydown",t.onEsc)}function T(t,e){if(0!==t.length)return t.find((function(t){return t.id===e.id}))}f.card.addEventListener("click",(function(t){var e=h(t,".card__item",f.CURRENT_MOVIES),n=T(f.watche,e),o=T(f.queue,e);b(e,r,n,o),E(x,w),_.hidden=!1}));l=a("bpxeT"),d=a("2TvXO"),f=a("Ur9Nn"),f=a("Ur9Nn");function q(t){localStorage.setItem(f.CURRENT_MOVIES,JSON.stringify(t)),f.card.innerHTML=c(JSON.parse(localStorage.getItem(f.CURRENT_MOVIES)).results)}var k=a("4cG42"),N=document.querySelector(".js-pagination");function O(t,e){var n="",o=t-2,a=t-1,r=t+1,i=t+2;JSON.parse(localStorage.getItem("current_movies")).page,t>1&&(n+="<li class='arrows'>ðŸ¡¸</li>",n+="<li class='firstInt'>1</li>"),t>4&&(n+="<li class='dots'>...</li>"),t>3&&(n+="<li class='two-left'>".concat(o,"</li>")),t>2&&(n+="<li>".concat(a,"</li>")),n+="<li class='active'>".concat(t,"</li>"),e-1>t&&(n+="<li >".concat(r,"</li>")),e-2>t&&(n+="<li >".concat(i,"</li>")),e-3>t&&(n+="<li class='dots'>...</li>"),e>t&&(n+="<li class='lastInt'>".concat(e,"</li>"),n+="<li class='arrows'>ðŸ¡º</li>"),N.innerHTML=n}var C=document.querySelector(".preloader");function I(){C.style.display="flex"}function U(){setTimeout((function(){C.style.display="none"}),500)}var L,R=document.querySelector(".js-pagination");function j(){return(j=t(l)(t(d).mark((function e(n){var o,a;return t(d).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),o=inputEl.value.trim()){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,(0,k.fetchMovies)(page=1,o);case 7:if(0!==(a=t.sent).results.length){t.next=12;break}return notif.style.visibility="visible",setTimeout((function(){notif.style.visibility="hidden"}),5e3),t.abrupt("return");case 12:L=a.page,I(),q(a),window.onload=U(),globalRequest=o,O(a.page,a.total_pages),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(4),console.log("Error");case 24:case"end":return t.stop()}}),e,null,[[4,20]])})))).apply(this,arguments)}function M(){return J.apply(this,arguments)}function J(){return J=t(l)(t(d).mark((function e(){var n,o,a=arguments;return t(d).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:1,!globalRequest){t.next=12;break}return I(),t.next=6,(0,k.fetchMovies)(L,globalRequest);case 6:case 15:return o=t.sent,window.onload=U(),L=o.page,t.abrupt("return",o);case 12:return I(),t.next=15,p(n);case 19:case"end":return t.stop()}}),e)}))),J.apply(this,arguments)}form.addEventListener("submit",(function(t){return j.apply(this,arguments)})),M().then((function(t){I(),q(t),L=t.page,window.onload=U(),O(t.page,t.total_pages)})),R.addEventListener("click",(function(t){if("LI"!==t.target.nodeName)return;if("..."===t.target.textContent)return;if("ðŸ¡¸"===t.target.textContent)console.log("Arrov<-",L),M(L-=1).then((function(t){q(t),O(t.page,t.total_pages)}));else if("ðŸ¡º"===t.target.textContent)console.log("Arrov>-",L),M(L+=1).then((function(t){q(t),O(t.page,t.total_pages)}));else{var e=t.target.textContent;console.log("in current - ",L),M(e).then((function(t){q(t),O(t.page,t.total_pages)}))}}))}();
//# sourceMappingURL=index.1a576878.js.map
