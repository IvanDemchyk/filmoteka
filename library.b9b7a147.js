function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequired7c6=o),o.register("9eEKU",(function(t,n){e(t.exports,"CURRENT_MOVIES",(function(){return r})),e(t.exports,"WATCHE",(function(){return o})),e(t.exports,"QUEUE",(function(){return a})),e(t.exports,"watche",(function(){return i})),e(t.exports,"queue",(function(){return d})),e(t.exports,"card",(function(){return l})),e(t.exports,"logo",(function(){return c})),e(t.exports,"home",(function(){return u})),e(t.exports,"library",(function(){return s})),e(t.exports,"THEME",(function(){return f})),e(t.exports,"LANG",(function(){return m})),e(t.exports,"GLOBALREQUEST",(function(){return p}));const r="current_movies",o="watche",a="queue",i=JSON.parse(localStorage.getItem(o))||[],d=JSON.parse(localStorage.getItem(a))||[],l=document.querySelector(".card"),c=document.querySelector(".page-header__logo-title"),u=document.querySelector(".home"),s=document.querySelector(".library"),f="theme",m="language",p="globalrequest"})),o.register("csVsy",(function(t,n){e(t.exports,"createMovieCard",(function(){return a}));var r=o("i5lY9");function a(e){return e.map((({poster_path:e,original_title:t="",title:n="",genre_ids:o,overview:a="",release_date:i="",id:d=Date.now()})=>{let l,c;l=""===i?"no date":i.substr(0,4),c=e?"https://image.tmdb.org/t/p/w500/"+e:"https://picsum.photos/500/750";return`<li class="card__item list" id="${d}">\n            <img src='${c}' loading="lazy" alt="${a}" class="card__img" />\n            <h2 class="card__title">${n??t}</h2>\n            <p class="card__desc">${(0,r.genresConvertor)(o).join(", ")} | ${l}\n            </p>\n            </li>`})).join("")}})),o.register("i5lY9",(function(t,n){e(t.exports,"genresConvertor",(function(){return a}));var r=o("2rpgd");function a(e){const t=e.map((e=>JSON.parse(localStorage.getItem(r.GENRES_MOVIES))[e]));return t.length>2?(t.splice(2,t.length-2),t.push("Other")):0===t.length&&t.push("no genres"),t}})),o.register("2rpgd",(function(t,n){e(t.exports,"GENRES_MOVIES",(function(){return r}));const r="genresList";fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=e8369cced440ebe3b010b622661df24b&language=en-US").then((e=>e.json())).then((function(e){const t=e.genres.reduce(((e,{id:t,name:n})=>(e[t]=n,e)),{});localStorage.setItem(r,JSON.stringify(t))}))})),o.register("e1opg",(function(t,n){e(t.exports,"showMovieMain",(function(){return f})),e(t.exports,"showMovieLibrary",(function(){return m})),e(t.exports,"showSliderMovie",(function(){return p}));var r=o("2rpgd"),a=o("37v9V"),i=o("4DL2f"),d=o("jXYZd"),l=o("9eEKU"),c=o("1oMUB"),u=o("l4jkk"),s=o("7hqwl");async function f(e){if("UL"===e.target.nodeName)return;const t=(0,d.getFilmMain)(e,".card__item",l.CURRENT_MOVIES),n=(0,i.default)(l.watche,t),o=(0,i.default)(l.queue,t),c=await(0,a.trailerInst)(t.id);(0,u.createMovieInfo)(t,r.GENRES_MOVIES,n,o,c),s.default.backdrop.hidden=!1}async function m(e){if("UL"===e.target.nodeName)return;const t=(0,d.getFilmLibrary)(e,".card__item",(0,c.default)()),n=(0,i.default)(l.watche,t),o=(0,i.default)(l.queue,t),f=await(0,a.trailerInst)(t.id);(0,u.createMovieInfo)(t,r.GENRES_MOVIES,n,o,f),s.default.backdrop.hidden=!1}async function p(e){if("UL"===e.target.nodeName)return;e.preventDefault();const t=(0,d.getFilmMain)(e,".slider__item",l.CURRENT_MOVIES),n=(0,i.default)(l.watche,t),o=(0,i.default)(l.queue,t),c=await(0,a.trailerInst)(t.id);(0,u.createMovieInfo)(t,r.GENRES_MOVIES,n,o,c),s.default.backdrop.hidden=!1}})),o.register("37v9V",(function(t,n){e(t.exports,"trailerInst",(function(){return i}));var r=o("2shzp");function a(e){return`<button class='modal__movie-btn modal-text modal-text--uppercase trailer-btn' "><a href="https://www.youtube.com/embed/${e[0].key}" target="_blank">\n  Trailer in new window\n </a></button>`}async function i(e){const t=await async function(e){try{return(await r.default.get(`https://api.themoviedb.org/3/movie/${e}/videos?api_key=0b11624b950ea9c4284f61844023b09c&language=en`)).data}catch(e){throw new Error(response.statusText)}}(e);if(34===t.status_code||7===t.status_code||0===t.results.length)return;const n=await function({results:e}){return e.filter((({name:e})=>e.toLowerCase().includes("trailer")))}(t);return 0!==n.length?(a(n),a(n)):void 0}})),o.register("4DL2f",(function(t,n){function r(e,t){if(0!==e.length)return e.find((e=>e.id===t.id))}e(t.exports,"default",(function(){return r}))})),o.register("jXYZd",(function(t,n){function r(e,t,n){const r=Number(e.target.closest(t).id);return JSON.parse(localStorage.getItem(n)).results.find((e=>e.id===r))}function o(e,t,n){const r=Number(e.target.closest(t).id);return JSON.parse(localStorage.getItem(n)).find((e=>e.id===r))}e(t.exports,"getFilmMain",(function(){return r})),e(t.exports,"getFilmLibrary",(function(){return o}))})),o.register("1oMUB",(function(t,n){e(t.exports,"default",(function(){return i}));var r=o("7hqwl"),a=o("9eEKU");function i(){return r.default.watchedBtn.classList.contains("active")?a.WATCHE:a.QUEUE}})),o.register("7hqwl",(function(t,n){e(t.exports,"default",(function(){return r}));var r={backdrop:document.querySelector(".backdrop"),modalMovie:document.querySelector(".modal__movie"),watchedBtn:document.querySelector(".watched-btn-js"),libraryHeaderLink:document.querySelector(".js-library"),libraryMainContainer:document.querySelector("#main"),libraryHeader:document.querySelector(".library-header"),librarySlider:document.querySelector("#slider")}})),o.register("l4jkk",(function(t,n){e(t.exports,"createMovieInfo",(function(){return c}));var r=o("k3Q0Z"),a=o("1u3xY"),i=o("kbBPu"),d=o("dLcSQ"),l=o("7hqwl");function c(e,t,n,o,c=""){const u=`<div class="movie__img-container">\n  <img class='movie__img'\n    alt="movie poster"\n    src="https://image.tmdb.org/t/p/w500/${e.poster_path}"\n  />\n</div>\n      <div class="movie__info">\n      <h2 class="movie__title">${e.title}</h2>\n      <table class="movie__details">\n      <tbody>\n      <tr>\n      <td class='movie__detail modal-text--left-column modal-text'>Vote/Votes</td>\n      <td class="movie__detail modal-text modal-text--line-high">\n      <span class="movie__detail--accent">\n      ${e.vote_average.toFixed(1)} </span\n      >/ ${e.vote_count}\n      </td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Popularity</td>\n      <td class="movie__detail modal-text modal-text--line-high">${e.popularity.toFixed(1)}</td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Original title</td>\n      <td class="movie__detail modal-text modal-text--uppercase movie__detail-right-column">${e.original_title}</td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Genres</td>\n      <td class="movie__detail modal-text movie__detail-right-column">${(0,r.default)(e.genre_ids,t)}</td>\n      </tr>\n          </tbody>\n          </table>\n          \n          <h3 class="movie__about modal-text modal-text--uppercase">About</h3>\n      <p class="movie__description modal-text">${e.overview}</p>\n      \n      <div class="movie__add-buttons">\n      ${c}\n        <button class="modal__movie-btn modal-text modal-text--uppercase js-movie__add-btn--watched">${n?"remove from ":"add to "}watched</button>\n        <button class="modal__movie-btn modal-text modal-text--uppercase js-movie__add-btn--queue">${o?"remove from ":"add to "}queue</button>\n      </div>\n      </div>\n  `;l.default.modalMovie.id=e.id,l.default.modalMovie.innerHTML=u,(0,a.default)(i.default,d.default)}})),o.register("k3Q0Z",(function(t,n){function r(e,t){return e.map((e=>JSON.parse(localStorage.getItem(t))[e])).join(", ")}e(t.exports,"default",(function(){return r}))})),o.register("1u3xY",(function(t,n){e(t.exports,"default",(function(){return a}));var r=o("7hqwl");function a(e,t){const n=document.querySelector(".modal-window__close-btn"),o={addToWatched:document.querySelector(".js-movie__add-btn--watched"),addToQueue:document.querySelector(".js-movie__add-btn--queue")};o.addToWatched.addEventListener("click",t.toWatched),o.addToQueue.addEventListener("click",t.toQueue),n.addEventListener("click",e.onCloseBtn),r.default.backdrop.addEventListener("click",e.onBackdropClick),document.addEventListener("keydown",e.onEsc)}})),o.register("kbBPu",(function(t,n){e(t.exports,"default",(function(){return a}));var r=o("7hqwl");var a={onBackdropClick(e){"BODY"===e.target.parentElement.nodeName&&(r.default.backdrop.hidden=!0,r.default.backdrop.removeEventListener("click",this.onBackdropClick))},onEsc(e){"Escape"===e.code&&(r.default.backdrop.hidden=!0,document.removeEventListener("keydown",this.onEsc))},onCloseBtn(){r.default.backdrop.hidden=!0}}})),o.register("dLcSQ",(function(t,n){e(t.exports,"default",(function(){return d}));var r=o("8w2rx"),a=o("fPFoE"),i=o("9eEKU");var d={toWatched(e){"add to watched"===e.currentTarget.textContent?(0,r.default)(e,".modal__movie",i.CURRENT_MOVIES,i.watche,i.WATCHE,"watched"):(0,a.default)(e,".modal__movie",i.watche,i.WATCHE,"watched")},toQueue(e){"add to queue"===e.currentTarget.textContent?(0,r.default)(e,".modal__movie",i.CURRENT_MOVIES,i.queue,i.QUEUE,"queue"):(0,a.default)(e,".modal__movie",i.queue,i.QUEUE,"queue")}}})),o.register("8w2rx",(function(t,n){e(t.exports,"default",(function(){return c}));var r=o("9eEKU"),a=o("jXYZd"),i=o("7hqwl"),d=o("5ZWFS"),l=o("1oMUB");function c(e,t,n,o,c,u){const s=(0,a.getFilmMain)(e,t,n);o.push(s),localStorage.setItem(c,JSON.stringify(o)),e.currentTarget.textContent=`remove from ${u}`,i.default.libraryHeaderLink.classList.contains("current")&&(r.card.innerHTML=(0,d.default)(JSON.parse(localStorage.getItem((0,l.default)()))))}})),o.register("5ZWFS",(function(t,n){e(t.exports,"default",(function(){return i}));var r=o("7hqwl"),a=o("csVsy");function i(e){return e&&e.length?(r.default.libraryHeader.classList.remove("library-header-notification"),r.default.libraryMainContainer.classList.remove("notification-bcg"),r.default.librarySlider.classList.remove("slider-bcg"),(0,a.createMovieCard)(e)):(r.default.libraryMainContainer.classList.add("notification-bcg"),r.default.libraryHeader.classList.add("library-header-notification"),r.default.librarySlider.classList.add("slider-bcg"),'<p class="notification-desc">\n            Nothing here yet, go back and select a movie.\n            </p>')}})),o.register("fPFoE",(function(t,n){e(t.exports,"default",(function(){return l}));var r=o("9eEKU"),a=o("7hqwl"),i=o("5ZWFS"),d=o("1oMUB");function l(e,t,n,o,l){const c=JSON.parse(localStorage.getItem(o)),u=Number(e.target.closest(t).id);c.forEach(((e,t)=>{e.id===u&&n.splice(t,1)})),localStorage.setItem(o,JSON.stringify(n)),e.currentTarget.textContent=`add to ${l}`,a.default.libraryHeaderLink.classList.contains("current")&&(r.card.innerHTML=(0,i.default)(JSON.parse(localStorage.getItem((0,d.default)()))))}})),o.register("gjiCh",(function(t,n){e(t.exports,"loaderOn",(function(){return o})),e(t.exports,"loaderOff",(function(){return a}));let r=document.querySelector(".preloader");function o(){r.style.display="flex"}function a(){setTimeout((()=>{r.style.display="none"}),500)}}));
//# sourceMappingURL=library.b9b7a147.js.map
