{"mappings":"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","sources":["src/js/libaryLocal.js","src/js/get-genres.js","src/js/genresConvertor.js","src/js/createMovieCard.js","src/js/localPagination.js","src/js/watched.js","src/js/modal-window.js","src/js/queue.js"],"sourcesContent":["import { watche, queue } from './local.js';\nimport { createMovieCard } from './createMovieCard';\nimport { card } from './local';\nimport { watchedLocal } from './watched';\nimport { showMovieLibrary } from './modal-window.js';\n\nconst divContainer = document.querySelector('#main');\nconst header = document.querySelector('.library-header');\n\nexport function checkDataRenderPage(data) {\n  if (!data || !data.length) {\n    divContainer.classList.add('notification-bcg');\n    header.classList.add('library-header-notification');\n    return `<p class=\"notification-desc\">\n            Nothing here yet, go back and select a movie.\n            </p>`;\n  }\n  header.classList.remove('library-header-notification');\n  divContainer.classList.remove('notification-bcg');\n  return createMovieCard(data);\n}\n\nwatchedLocal.paginationRender();\ncard.addEventListener('click', showMovieLibrary)\n/* card.insertAdjacentHTML('beforeend', checkDataRenderPage(watche)); */\n","export const GENRES_MOVIES = 'genresList';\nconst fetchedGenres = () => {\n  return fetch(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=e8369cced440ebe3b010b622661df24b&language=en-US`\n  ).then(data => data.json());\n};\n\nfetchedGenres().then(onFetchSuccess);\n\nfunction onFetchSuccess(respond) {\n  const genresList = respond.genres.reduce((acc, { id, name }) => {\n    acc[id] = name;\n    return acc;\n  }, {});\n  localStorage.setItem(GENRES_MOVIES, JSON.stringify(genresList));\n}\n","// ---- Genres converting function - замінює id жанрів в картці фільму на назви жанрів\nimport { GENRES_MOVIES } from './get-genres'\nexport function genresConvertor(genre_ids) {\n  const result = genre_ids.map(id => {\n    const objectNumbersInString = JSON.parse(localStorage.getItem(GENRES_MOVIES));\n    return objectNumbersInString[id];\n  });\n  if (result.length > 2) {\n    result.splice(2, result.length - 2);\n    result.push(\"Other\")\n  }\n  return result\n}\n","import { genresConvertor } from './genresConvertor';\nexport function createMovieCard(data) {\n  const markup = data\n    .map(\n      ({\n        poster_path,\n        original_title = '',\n        title = '',\n        genre_ids = ['no info'],\n        overview = '',\n        release_date = '......',\n        id = Date.now,\n      }) => {\n        let path;\n        if (poster_path) {\n          path = 'https://image.tmdb.org/t/p/w500/' + poster_path;\n        } else {\n          path = 'https://picsum.photos/500/750';\n        }\n        const altPath = './images/no-file-opt.jpg';\n        //  <img src=\"./images/no-file-opt.jpg\" alt=\"A brilliant.\">\n        return `<li class=\"card__item list\" id=\"${id}\">\n            <img src='${path}' loading=\"lazy\" alt=\"${overview}\" class=\"card__img\" />\n            <h2 class=\"card__title\">${title ?? original_title}</h2>\n            <p class=\"card__desc\">${genresConvertor(genre_ids).join(\n              ', '\n            )} | ${release_date.substr(0, 4)}\n            </p>\n            </li>`;\n      }\n    )\n    .join('');\n  return markup;\n}\n","import { card } from './local';\nimport { checkDataRenderPage } from './libaryLocal';\n\nexport const paginationLibBox = document.querySelector('.js-pagination-lib');\n\nexport class LocalPagination {\n    constructor(category) {\n      this.arr = category;\n      this.pageNum = 1;\n      this.pageAll = Math.round((this.arr.length - 1 ) / 5);\n      this.pageSize = 5;\n      this.pagedArr;\n    }\n    paginate(arr, pageNumber, pageSize) {\n      return arr.slice((pageNumber - 1) * pageSize, pageNumber * pageSize);\n    }\n  \n    paginationRender() {\n      if (this.arr.length < 5) {\n        card.innerHTML = checkDataRenderPage(this.arr);\n      } else {\n        this.pagedArr = this.paginate(this.arr, this.pageNum, this.pageSize);\n        card.innerHTML = checkDataRenderPage(this.pagedArr);\n        paginationLib(this.pageNum, this.pageAll);\n      }\n    }\n  \n    pagLeft() {\n      this.pageNum -= 1;\n      this.pagedArr = this.paginate(this.arr, this.pageNum, this.pageSize);\n      card.innerHTML = checkDataRenderPage(this.pagedArr);\n      paginationLib(this.pageNum, this.pageAll);\n    }\n  \n    pagRight() {\n      this.pageNum += 1;\n      this.pagedArr = this.paginate(this.arr, this.pageNum, this.pageSize);\n      card.innerHTML = checkDataRenderPage(this.pagedArr);\n      paginationLib(this.pageNum, this.pageAll);\n    }\n  \n    peakedPage(actPage) {\n      this.pageNum = Number(actPage);\n      this.pagedArr = this.paginate(this.arr, this.pageNum, this.pageSize);\n      card.innerHTML = checkDataRenderPage(this.pagedArr);\n      paginationLib(this.pageNum, this.pageAll);\n    }\n  }\n\nfunction paginationLib(currPage, allPages) {\n    let markupControls = '';\n    let beforeTwoPages = currPage - 2;\n    let beforeOnePage = currPage - 1;\n    let afterOnePage = currPage + 1;\n    let afterTwoPage = currPage + 2;\n\n      \n    if (currPage > 1) {\n      markupControls += `<li class='arrows arrow-left'>&#129144;</li>`;\n      markupControls += `<li class=\"firstInt\">1</li>`;\n    }\n\n    if (currPage > 4) {\n      markupControls += `<li class=\"dots\">...</li>`;\n    }\n\n    if (currPage > 3) {\n      markupControls += `<li class=\"two-left\">${beforeTwoPages}</li>`;\n    }\n\n    if (currPage > 2) {\n      markupControls += `<li>${beforeOnePage}</li>`;\n    }\n\n    markupControls += `<li class='active'>${currPage}</li>`;\n\n    if (allPages - 1 > currPage) {\n      markupControls += `<li >${afterOnePage}</li>`;\n    }\n\n    if (allPages - 2 > currPage) {\n      markupControls += `<li >${afterTwoPage}</li>`;\n    }\n\n    if (allPages - 3 > currPage) {\n      markupControls += `<li class=\"dots\">...</li>`;\n    }\n\n    if (allPages > currPage) {\n      markupControls += `<li class=\"lastInt\">${allPages}</li>`;\n      markupControls += `<li class='arrows arrow-right'>&#129146</li>`;\n    }\n\n    paginationLibBox.innerHTML = markupControls;\n  }\n  \n","// const watchedBtn = document.querySelector('.watched-btn-js');\n// const queueBtn = document.querySelector('.queue-btn-js');\n// watchedBtn.addEventListener('click', onClickWatchedBtn);\n// function onClickWatchedBtn() {\n//   onActiveWatchedBtn();\n// }\n// function onActiveWatchedBtn() {\n//   watchedBtn.classList.add('active');\n//   queueBtn.classList.remove('active');\n// }\nimport {LocalPagination, localPagWatched, paginationLibBox} from './localPagination.js'\nimport { CURRENT_MOVIES, WATCHE, QUEUE, watche, queue } from './local.js';\nimport { card } from './local';\n\nconst btnWatch = document.querySelector('.watched-btn-js');\nconst btnQueue = document.querySelector('.queue-btn-js');\nconst containerBtn = document.querySelector('.library-header__buttons');\n\nconst CRM = JSON.parse(localStorage.getItem(CURRENT_MOVIES)).results; // test arr\nexport const watchedLocal = new LocalPagination(CRM); // test until array  watched will be fulfiled \nconst queueLocal = new LocalPagination(CRM); //test until array  queue will be fulfiled \n\ncontainerBtn.addEventListener('click', onClickBtn);\npaginationLibBox.addEventListener(\"click\", localPagWatchedLib);\n\nfunction onClickBtn({ target }) {\n  if (!target.classList.contains('library-header__btn')) {\n    return;\n  }\n  if (target.classList.contains('queue-btn-js')) {\n    card.innerHTML = '';\n    queueLocal.paginationRender();\n    toggleClassBtn('active', btnWatch, target);\n  }\n  if (target.classList.contains('watched-btn-js')) {\n    card.innerHTML = '';\n    watchedLocal.paginationRender();\n    toggleClassBtn('active', btnWatch, target);\n  }\n}\n\nfunction toggleClassBtn(classStr, btn, current) {\n  current.classList.add(classStr);\n  btn.classList.remove(classStr);\n}\n\nfunction localPagWatchedLib(evt) {\n   const isWatchedActive = Boolean(document.querySelector('.watched-btn-js.active'));\n   const target = evt.target.textContent;\n\n  if (evt.target.nodeName !== 'LI' || target === \"...\") {\n    return;\n  }\n\n  if (target === \"🡸\") {\n    isWatchedActive ? watchedLocal.pagLeft() : queueLocal.pagLeft();\n\n  } else if (target === \"🡺\") {\n    isWatchedActive ? watchedLocal.pagRight() : queueLocal.pagRight();\n\n  } else {\n    isWatchedActive ? watchedLocal.peakedPage(target) : queueLocal.peakedPage(target);\n  }  \n}\n","import { CURRENT_MOVIES, watche, queue, WATCHE, QUEUE } from './local.js';\nimport { GENRES_MOVIES } from './get-genres';\n\nconst backdrop = document.querySelector('.backdrop');\nconst modalWindow = document.querySelector('.modal-window');\nconst watchedBtn = document.querySelector('.watched-btn-js');\nconst queueBtn = document.querySelector('.queue-btn-js');\n// відкриття модального вікна з інфо про фільм\nfunction showMovieMain(e) {\n  const film = getFilmMain(e, '.card__item', CURRENT_MOVIES);\n\n  const checkWatched = checkLibrary(watche, film);\n  const checkQueue = checkLibrary(queue, film);\n\n  createMovieInfo(film, GENRES_MOVIES, checkWatched, checkQueue);\n  eventListeners(closeModal, addFilm);\n  backdrop.hidden = false;\n}\n\nfunction showMovieLibrary(e) {\n  const film = getFilmLibrary(e, '.card__item', watchedOrQueue());\n\n  const checkWatched = checkLibrary(watche, film);\n  const checkQueue = checkLibrary(queue, film);\n\n  createMovieInfo(film, GENRES_MOVIES, checkWatched, checkQueue);\n  eventListeners(closeModal, addFilm);\n\n  backdrop.hidden = false;\n}\n\nfunction getFilmMain(e, element, fromStoarage) {\n  const movieId = Number(e.target.closest(element).id);\n  return JSON.parse(localStorage.getItem(fromStoarage)).results.find(\n    movie => movie.id === movieId\n  );\n}\n\nfunction getFilmLibrary(e, element, fromStoarage) {\n  const movieId = Number(e.target.closest(element).id);\n  return JSON.parse(localStorage.getItem(fromStoarage)).find(\n    movie => movie.id === movieId\n  );\n}\n\n// розмітка з інфо про фільм у модальному вікні\nfunction createMovieInfo(movie, genresList, checkWatched, checkQueue) {\n  const modalMovieMarkup = `<button class=\"modal-window__close-btn\">close</button>\n\n    <div class=\"modal__movie\" id='${\n      movie.id\n    }'><img class='movie__img' alt=\"movie poster\" src=\"https://image.tmdb.org/t/p/w500/${\n    movie.poster_path\n  }\"/>\n      <div class=\"movie__info\">\n      <h2 class=\"movie__title\">${movie.title}</h2>\n      <table class=\"movie__details\">\n      <tbody>\n      <tr>\n      <td class='movie__detail modal-text--left-column modal-text'>Vote/Votes</td>\n      <td class=\"movie__detail modal-text modal-text--line-high\">\n      <span class=\"movie__detail--accent\">\n      ${movie.vote_average.toFixed(1)} </span\n      >/ ${movie.vote_count}\n      </td>\n      </tr>\n      <tr>\n      <td class=\"movie__detail modal-text--left-column modal-text\">Popularity</td>\n      <td class=\"movie__detail modal-text modal-text--line-high\">${movie.popularity.toFixed(\n        1\n      )}</td>\n      </tr>\n      <tr>\n      <td class=\"movie__detail modal-text--left-column modal-text\">Original title</td>\n      <td class=\"movie__detail modal-text modal-text--uppercase\">${\n        movie.original_title\n      }</td>\n      </tr>\n      <tr>\n      <td class=\"movie__detail modal-text--left-column modal-text\">Genres</td>\n      <td class=\"movie__detail modal-text\">${genresConvertor(\n        movie.genre_ids,\n        genresList\n      )}</td>\n      </tr>\n          </tbody>\n          </table>\n          \n          <h3 class=\"movie__about modal-text modal-text--uppercase\">About</h3>\n      <p class=\"movie__description modal-text\">${movie.overview}</p>\n      <div class=\"movie__add-buttons\">\n        <button class=\"movie__add-btn modal-text modal-text--uppercase js-movie__add-btn--watched\">${\n          checkWatched ? 'remove from ' : 'add to '\n        }watched</button>\n        <button class=\"movie__add-btn modal-text modal-text--uppercase js-movie__add-btn--queue\">${\n          checkQueue ? 'remove from ' : 'add to '\n        }queue</button>\n      </div><button data-movie-id='${movie.id}'>Trailer</button>\n      </div></div>\n  `;\n  modalWindow.innerHTML = modalMovieMarkup;\n}\n\n// функції для закриття модального вікна\nconst closeModal = {\n  onBackdropClick(e) {\n    if (e.target.parentElement.nodeName === 'BODY') {\n      backdrop.hidden = true;\n      backdrop.removeEventListener('click', this.onBackdropClick);\n    }\n  },\n\n  onEsc(e) {\n    if (e.code !== 'Escape') {\n      return;\n    }\n    backdrop.hidden = true;\n    document.removeEventListener('keydown', this.onEsc);\n  },\n\n  onCloseBtn() {\n    backdrop.hidden = true;\n  },\n};\n\n// функції додавання фільмів у список переглянутих та у чергу\nconst addFilm = {\n  toWatched(e) {\n    if (e.currentTarget.textContent === 'add to watched') {\n      addToWatchedOrQueue(\n        e,\n        '.modal__movie',\n        CURRENT_MOVIES,\n        watche,\n        WATCHE,\n        'watched'\n      );\n    } else {\n      removeFromWatchedOrQueue(e, '.modal__movie', watche, WATCHE, 'watched');\n    }\n  },\n\n  toQueue(e) {\n    if (e.currentTarget.textContent === 'add to queue') {\n      addToWatchedOrQueue(\n        e,\n        '.modal__movie',\n        CURRENT_MOVIES,\n        queue,\n        QUEUE,\n        'queue'\n      );\n    } else {\n      removeFromWatchedOrQueue(e, '.modal__movie', queue, QUEUE, 'queue');\n    }\n  },\n};\n\nfunction addToWatchedOrQueue(e, element, fromStoarage, local, key, btn) {\n  const film = getFilmMain(e, element, fromStoarage);\n  local.push(film);\n  localStorage.setItem(key, JSON.stringify(local));\n  e.currentTarget.textContent = `remove from ${btn}`;\n}\n\nfunction removeFromWatchedOrQueue(e, element, local, key, btn) {\n  const films = JSON.parse(localStorage.getItem(key));\n  const movieId = Number(e.target.closest(element).id);\n  films.forEach((film, i) => {\n    film.id === movieId ? local.splice(i, 1) : film;\n  });\n  localStorage.setItem(key, JSON.stringify(local));\n  e.currentTarget.textContent = `add to ${btn}`;\n}\n\n// додає та видаляє слухачі подій\nfunction eventListeners(closeModal, addFilm) {\n  const modalCloseBtn = document.querySelector('.modal-window__close-btn');\n  const modalBtns = {\n    addToWatched: document.querySelector('.js-movie__add-btn--watched'),\n    addToQueue: document.querySelector('.js-movie__add-btn--queue'),\n  };\n\n  modalBtns.addToWatched.addEventListener('click', addFilm.toWatched);\n  modalBtns.addToQueue.addEventListener('click', addFilm.toQueue);\n  modalCloseBtn.addEventListener('click', closeModal.onCloseBtn);\n  backdrop.addEventListener('click', closeModal.onBackdropClick);\n  document.addEventListener('keydown', closeModal.onEsc);\n}\n\nfunction genresConvertor(movieGenres, genresList) {\n  return movieGenres\n    .map(genre => {\n      const allGenres = JSON.parse(localStorage.getItem(genresList));\n      return allGenres[genre];\n    })\n    .join(', ');\n}\n\nfunction checkLibrary(local, film) {\n  if (local.length === 0) {\n    return;\n  }\n\n  return local.find(movie => movie.id === film.id);\n}\n\nfunction watchedOrQueue() {\n  if (watchedBtn.classList.contains('active')) {\n    return WATCHE;\n  } else {\n    return QUEUE;\n  }\n}\nexport { showMovieMain, showMovieLibrary };\n","const watchedBtn = document.querySelector('.watched-btn-js');\nconst queueBtn = document.querySelector('.queue-btn-js');\nqueueBtn.addEventListener('click', onClickQueueBtn);\nfunction onClickQueueBtn() {\n  onActiveQueueBtn();\n}\nfunction onActiveQueueBtn() {\n  queueBtn.classList.add('active');\n  watchedBtn.classList.remove('active');\n}\n"],"names":["parcelRequire","$fab5075d8cb83450$export$4ab1186d8955f042","$5633099b30fcb21f$export$b5b6693b5298569f","genre_ids","result","map","id","JSON","parse","localStorage","getItem","length","splice","push","$d26123189b320653$export$9d27b867a89df126","data","param","path","poster_path","_original_title","original_title","_title","title","_genre_ids","_overview","overview","_release_date","release_date","_id","Date","now","concat","join","substr","fetch","then","json","respond","genresList","genres","reduce","acc","name","setItem","stringify","$8MBJY","$57cb43f6e8f745ee$export$aff35cc3e96af4ed","document","querySelector","$57cb43f6e8f745ee$export$b92778d65fa650ce","LocalPagination","category","this","arr","pageNum","pageAll","Math","round","pageSize","pagedArr","key","pageNumber","slice","$Ur9Nn","card","innerHTML","$b549bdb8c3ea1ad9$export$c7201ec45e1bf459","paginate","$57cb43f6e8f745ee$var$paginationLib","actPage","Number","currPage","allPages","markupControls","beforeOnePage","afterOnePage","afterTwoPage","$a215baf1061f969f$var$btnWatch","$a215baf1061f969f$var$containerBtn","$a215baf1061f969f$var$CRM","CURRENT_MOVIES","results","$a215baf1061f969f$export$40df768da7845352","$a215baf1061f969f$var$queueLocal","$a215baf1061f969f$var$toggleClassBtn","classStr","btn","current","classList","add","remove","addEventListener","target","contains","paginationRender","evt","isWatchedActive","Boolean","textContent","nodeName","pagLeft","pagRight","peakedPage","$50be0534152dd275$var$backdrop","$50be0534152dd275$var$modalWindow","$50be0534152dd275$var$watchedBtn","$50be0534152dd275$var$getFilmMain","e","element","fromStoarage","movieId","closest","find","movie","$50be0534152dd275$var$createMovieInfo","checkWatched","checkQueue","modalMovieMarkup","vote_average","toFixed","vote_count","popularity","movieGenres","genre","$50be0534152dd275$var$genresConvertor","$50be0534152dd275$var$closeModal","onBackdropClick","parentElement","hidden","removeEventListener","onEsc","code","onCloseBtn","$50be0534152dd275$var$addFilm","toWatched","currentTarget","$50be0534152dd275$var$addToWatchedOrQueue","watche","WATCHE","$50be0534152dd275$var$removeFromWatchedOrQueue","toQueue","queue","QUEUE","local","film","films","forEach","i","$50be0534152dd275$var$eventListeners","closeModal1","addFilm1","modalCloseBtn","modalBtns","addToWatched","addToQueue","$50be0534152dd275$var$checkLibrary","$b549bdb8c3ea1ad9$var$divContainer","$b549bdb8c3ea1ad9$var$header","$50be0534152dd275$var$getFilmLibrary","$e45a8be9cfe57eeb$var$watchedBtn","$e45a8be9cfe57eeb$var$queueBtn"],"version":3,"file":"library.56b14a0c.js.map"}