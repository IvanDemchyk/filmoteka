{"mappings":"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","sources":["src/js/libaryLocal.js","src/js/genresConvertor.js","src/js/get-genres.js","src/js/createMovieCard.js","src/js/localPagination.js","src/js/watched.js","src/js/queue.js"],"sourcesContent":["import { watche, queue } from './local.js';\nimport { createMovieCard } from './createMovieCard';\nimport { card } from './local';\nimport {watchedLocal} from \"./watched\";\n\nconst divContainer = document.querySelector('#main');\nconst header = document.querySelector('.library-header');\n\nexport function checkDataRenderPage(data) {\n  if (!data || !data.length) {\n    divContainer.classList.add('notification-bcg');\n    header.classList.add('library-header-notification');\n    return `<p class=\"notification-desc\">\n            Nothing here yet, go back and select a movie.\n            </p>`;\n  }\n  header.classList.remove('library-header-notification');\n  divContainer.classList.remove('notification-bcg');\n  return createMovieCard(data);\n}\n\nwatchedLocal.paginationRender();\n\n/* card.insertAdjacentHTML('beforeend', checkDataRenderPage(watche)); */\n","// ---- Genres converting function - замінює id жанрів в картці фільму на назви жанрів\nimport { GENRES_MOVIES } from './get-genres'\nexport function genresConvertor(genre_ids) {\n  const result = genre_ids.map(id => {\n    const objectNumbersInString = JSON.parse(localStorage.getItem(GENRES_MOVIES));\n    return objectNumbersInString[id];\n  });\n  if (result.length > 2) {\n    result.splice(2, result.length - 2);\n    result.push(\"other\")\n  }\n  return result\n}\n","export const GENRES_MOVIES = 'genresList';\nconst fetchedGenres = () => {\n  return fetch(\n    `https://api.themoviedb.org/3/genre/movie/list?api_key=e8369cced440ebe3b010b622661df24b&language=en-US`\n  ).then(data => data.json());\n};\n\nfetchedGenres().then(onFetchSuccess);\n\nfunction onFetchSuccess(respond) {\n  const genresList = respond.genres.reduce((acc, { id, name }) => {\n    acc[id] = name;\n    return acc;\n  }, {});\n  localStorage.setItem(GENRES_MOVIES, JSON.stringify(genresList));\n}\n","import { genresConvertor } from \"./genresConvertor\";\nexport function createMovieCard(data) {\n  const markup = data\n    .map(\n      ({\n        poster_path,\n        original_title,\n        title,\n        genre_ids,\n        overview,\n        release_date,\n        id,\n      }) => {\n        return `<li class=\"card__item list\" id=\"${id}\">\n            <img src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" loading=\"lazy\" alt=\"${overview}\" class=\"card__img\" />\n            <h2 class=\"card__title\">${title ?? original_title}</h2>\n            <p class=\"card__desc\">${genresConvertor(genre_ids).join(\n              ', '\n            )} | ${release_date.substr(0, 4)}\n            </p>\n            </li>`;\n      }\n    )\n    .join('');\n  return markup;\n}\n","import { card } from './local';\nimport { checkDataRenderPage } from './libaryLocal';\n\nexport const paginationLibBox = document.querySelector('.js-pagination-lib');\n\nexport class LocalPagination {\n    constructor(category) {\n      this.arr = category;\n      this.pageNum = 1;\n      this.pageAll = Math.round((this.arr.length - 1 ) / 5);\n      this.pageSize = 5;\n      this.pagedArr;\n    }\n    paginate(arr, pageNumber, pageSize) {\n      return arr.slice((pageNumber - 1) * pageSize, pageNumber * pageSize);\n    }\n  \n    paginationRender() {\n      if (this.arr.length < 5) {\n        card.innerHTML = checkDataRenderPage(this.arr);\n      } else {\n        this.pagedArr = this.paginate(this.arr, this.pageNum, this.pageSize);\n        card.innerHTML = checkDataRenderPage(this.pagedArr);\n        paginationLib(this.pageNum, this.pageAll);\n      }\n    }\n  \n    pagLeft() {\n      this.pageNum -= 1;\n      this.pagedArr = this.paginate(this.arr, this.pageNum, this.pageSize);\n      card.innerHTML = checkDataRenderPage(this.pagedArr);\n      paginationLib(this.pageNum, this.pageAll);\n    }\n  \n    pagRight() {\n      this.pageNum += 1;\n      this.pagedArr = this.paginate(this.arr, this.pageNum, this.pageSize);\n      card.innerHTML = checkDataRenderPage(this.pagedArr);\n      paginationLib(this.pageNum, this.pageAll);\n    }\n  \n    peakedPage(actPage) {\n      this.pageNum = Number(actPage);\n      this.pagedArr = this.paginate(this.arr, this.pageNum, this.pageSize);\n      card.innerHTML = checkDataRenderPage(this.pagedArr);\n      paginationLib(this.pageNum, this.pageAll);\n    }\n  }\n\nfunction paginationLib(currPage, allPages) {\n    let markupControls = '';\n    let beforeTwoPages = currPage - 2;\n    let beforeOnePage = currPage - 1;\n    let afterOnePage = currPage + 1;\n    let afterTwoPage = currPage + 2;\n\n      \n    if (currPage > 1) {\n      markupControls += `<li class='arrows arrow-left'>&#129144;</li>`;\n      markupControls += `<li class=\"firstInt\">1</li>`;\n    }\n\n    if (currPage > 4) {\n      markupControls += `<li class=\"dots\">...</li>`;\n    }\n\n    if (currPage > 3) {\n      markupControls += `<li class=\"two-left\">${beforeTwoPages}</li>`;\n    }\n\n    if (currPage > 2) {\n      markupControls += `<li>${beforeOnePage}</li>`;\n    }\n\n    markupControls += `<li class='active'>${currPage}</li>`;\n\n    if (allPages - 1 > currPage) {\n      markupControls += `<li >${afterOnePage}</li>`;\n    }\n\n    if (allPages - 2 > currPage) {\n      markupControls += `<li >${afterTwoPage}</li>`;\n    }\n\n    if (allPages - 3 > currPage) {\n      markupControls += `<li class=\"dots\">...</li>`;\n    }\n\n    if (allPages > currPage) {\n      markupControls += `<li class=\"lastInt\">${allPages}</li>`;\n      markupControls += `<li class='arrows arrow-right'>&#129146</li>`;\n    }\n\n    paginationLibBox.innerHTML = markupControls;\n  }\n  \n","// const watchedBtn = document.querySelector('.watched-btn-js');\n// const queueBtn = document.querySelector('.queue-btn-js');\n// watchedBtn.addEventListener('click', onClickWatchedBtn);\n// function onClickWatchedBtn() {\n//   onActiveWatchedBtn();\n// }\n// function onActiveWatchedBtn() {\n//   watchedBtn.classList.add('active');\n//   queueBtn.classList.remove('active');\n// }\nimport {LocalPagination, localPagWatched, paginationLibBox} from './localPagination.js'\nimport { CURRENT_MOVIES, WATCHE, QUEUE, watche, queue } from './local.js';\nimport { card } from './local';\n\nconst btnWatch = document.querySelector('.watched-btn-js');\nconst btnQueue = document.querySelector('.queue-btn-js');\nconst containerBtn = document.querySelector('.library-header__buttons');\n\nconst CRM = JSON.parse(localStorage.getItem(CURRENT_MOVIES)).results; // test arr\nexport const watchedLocal = new LocalPagination(CRM); // test until array  watched will be fulfiled \nconst queueLocal = new LocalPagination(CRM); //test until array  queue will be fulfiled \n\ncontainerBtn.addEventListener('click', onClickBtn);\npaginationLibBox.addEventListener(\"click\", localPagWatchedLib);\n\nfunction onClickBtn({ target }) {\n  if (!target.classList.contains('library-header__btn')) {\n    return;\n  }\n  if (target.classList.contains('queue-btn-js')) {\n    card.innerHTML = '';\n    queueLocal.paginationRender();\n    toggleClassBtn('active', btnWatch, target);\n  }\n  if (target.classList.contains('watched-btn-js')) {\n    card.innerHTML = '';\n    watchedLocal.paginationRender();\n    toggleClassBtn('active', btnWatch, target);\n  }\n}\n\nfunction toggleClassBtn(classStr, btn, current) {\n  current.classList.add(classStr);\n  btn.classList.remove(classStr);\n}\n\nfunction localPagWatchedLib(evt) {\n   const isWatchedActive = Boolean(document.querySelector('.watched-btn-js.active'));\n   const target = evt.target.textContent;\n\n  if (evt.target.nodeName !== 'LI' || target === \"...\") {\n    return;\n  }\n\n  if (target === \"🡸\") {\n    isWatchedActive ? watchedLocal.pagLeft() : queueLocal.pagLeft();\n\n  } else if (target === \"🡺\") {\n    isWatchedActive ? watchedLocal.pagRight() : queueLocal.pagRight();\n\n  } else {\n    isWatchedActive ? watchedLocal.peakedPage(target) : queueLocal.peakedPage(target);\n  }  \n}\n","const watchedBtn = document.querySelector('.watched-btn-js');\nconst queueBtn = document.querySelector('.queue-btn-js');\nqueueBtn.addEventListener('click', onClickQueueBtn);\nfunction onClickQueueBtn() {\n  onActiveQueueBtn();\n}\nfunction onActiveQueueBtn() {\n  queueBtn.classList.add('active');\n  watchedBtn.classList.remove('active');\n}\n"],"names":["parcelRequire","$d2a9bc40eacd6bf8$export$b5b6693b5298569f","genre_ids","result","map","id","JSON","parse","localStorage","getItem","length","splice","push","$9134abd8877f9bb7$export$9d27b867a89df126","data","poster_path","original_title","title","overview","release_date","join","substr","fetch","then","json","respond","genresList","genres","reduce","acc","name","setItem","stringify","$9eEKU","$450475fd974e5d04$export$aff35cc3e96af4ed","document","querySelector","$450475fd974e5d04$export$b92778d65fa650ce","paginate","arr","pageNumber","pageSize","slice","paginationRender","this","card","innerHTML","$48388ab6357ab7ce$export$c7201ec45e1bf459","pagedArr","pageNum","$450475fd974e5d04$var$paginationLib","pageAll","pagLeft","pagRight","peakedPage","actPage","Number","constructor","category","Math","round","currPage","allPages","markupControls","$7126a8cfa5cf9b17$var$btnWatch","$7126a8cfa5cf9b17$var$containerBtn","$7126a8cfa5cf9b17$var$CRM","CURRENT_MOVIES","results","$7126a8cfa5cf9b17$export$40df768da7845352","$7126a8cfa5cf9b17$var$queueLocal","$7126a8cfa5cf9b17$var$toggleClassBtn","classStr","btn","current","classList","add","remove","addEventListener","target","contains","evt","isWatchedActive","Boolean","textContent","nodeName","$48388ab6357ab7ce$var$divContainer","$48388ab6357ab7ce$var$header","$a595e1401ec493e7$var$watchedBtn","$a595e1401ec493e7$var$queueBtn"],"version":3,"file":"library.7f6ac12f.js.map"}