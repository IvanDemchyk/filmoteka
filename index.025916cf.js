!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,t){o[e]=t},t.parcelRequired7c6=a);var c="genresList";function r(e){var t=e.map((function(e){return JSON.parse(localStorage.getItem(c))[e]}));return t.length>2?(t.splice(2,t.length-2),t.push("Other")):0===t.length&&t.push("no genres"),t}function i(e){return e.map((function(e){var t,n,o=e.poster_path,a=e.original_title,c=void 0===a?"":a,i=e.title,l=void 0===i?"":i,s=e.genre_ids,d=e.overview,u=void 0===d?"":d,m=e.release_date,v=void 0===m?"":m,p=e.id,g=void 0===p?Date.now():p;t=""===v?"no date":v.substr(0,4),n=o?"https://image.tmdb.org/t/p/w500/"+o:"https://picsum.photos/500/750";return'<li class="card__item list" id="'.concat(g,"\">\n            <img src='").concat(n,'\' loading="lazy" alt="').concat(u,'" class="card__img" />\n            <h2 class="card__title">').concat(null!=l?l:c,'</h2>\n            <p class="card__desc">').concat(r(s).join(", ")," | ").concat(t,"\n            </p>\n            </li>")})).join("")}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=e8369cced440ebe3b010b622661df24b&language=en-US").then((function(e){return e.json()})).then((function(e){var t=e.genres.reduce((function(e,t){var n=t.id,o=t.name;return e[n]=o,e}),{});localStorage.setItem(c,JSON.stringify(t))})),a("az1QL");var l="current_movies",s="watche",d="queue",u=JSON.parse(localStorage.getItem(s))||[],m=JSON.parse(localStorage.getItem(d))||[],v=document.querySelector(".card"),p="theme",g="language",f=(document.querySelector(".form-js"),document.querySelector(".form-input"),document.querySelector(".form__notification"),document.querySelector(".backdrop")),h=document.querySelector(".modal-window");document.querySelector(".watched-btn-js"),document.querySelector(".queue-btn-js");function _(e,t,n){var o=Number(e.target.closest(t).id);return JSON.parse(localStorage.getItem(n)).results.find((function(e){return e.id===o}))}function b(e,t,n,o){var a='<button class="modal-window__close-btn">close</button>\n\n    <div class="modal__movie" id=\''.concat(e.id,"'><img class='movie__img' alt=\"movie poster\" src=\"https://image.tmdb.org/t/p/w500/").concat(e.poster_path,'"/>\n      <div class="movie__info">\n      <h2 class="movie__title">').concat(e.title,'</h2>\n      <table class="movie__details">\n      <tbody>\n      <tr>\n      <td class=\'movie__detail modal-text--left-column modal-text\'>Vote/Votes</td>\n      <td class="movie__detail modal-text modal-text--line-high">\n      <span class="movie__detail--accent">\n      ').concat(e.vote_average.toFixed(1)," </span\n      >/ ").concat(e.vote_count,'\n      </td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Popularity</td>\n      <td class="movie__detail modal-text modal-text--line-high">').concat(e.popularity.toFixed(1),'</td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Original title</td>\n      <td class="movie__detail modal-text modal-text--uppercase">').concat(e.original_title,'</td>\n      </tr>\n      <tr>\n      <td class="movie__detail modal-text--left-column modal-text">Genres</td>\n      <td class="movie__detail modal-text">').concat(function(e,t){return e.map((function(e){return JSON.parse(localStorage.getItem(t))[e]})).join(", ")}(e.genre_ids,t),'</td>\n      </tr>\n          </tbody>\n          </table>\n          \n          <h3 class="movie__about modal-text modal-text--uppercase">About</h3>\n      <p class="movie__description modal-text">').concat(e.overview,'</p>\n      <div class="movie__add-buttons">\n        <button class="movie__add-btn modal-text modal-text--uppercase js-movie__add-btn--watched">').concat(n?"remove from ":"add to ",'watched</button>\n        <button class="movie__add-btn modal-text modal-text--uppercase js-movie__add-btn--queue">').concat(o?"remove from ":"add to ","queue</button>\n      </div><button data-movie-id='").concat(e.id,"'>Trailer</button>\n      </div></div>\n  ");h.innerHTML=a}var y={onBackdropClick:function(e){"BODY"===e.target.parentElement.nodeName&&(f.hidden=!0,f.removeEventListener("click",this.onBackdropClick))},onEsc:function(e){"Escape"===e.code&&(f.hidden=!0,document.removeEventListener("keydown",this.onEsc))},onCloseBtn:function(){f.hidden=!0}},w={toWatched:function(e){"add to watched"===e.currentTarget.textContent?x(e,".modal__movie",l,u,s,"watched"):S(e,".modal__movie",u,s,"watched")},toQueue:function(e){"add to queue"===e.currentTarget.textContent?x(e,".modal__movie",l,m,d,"queue"):S(e,".modal__movie",m,d,"queue")}};function x(e,t,n,o,a,c){var r=_(e,t,n);o.push(r),localStorage.setItem(a,JSON.stringify(o)),e.currentTarget.textContent="remove from ".concat(c)}function S(e,t,n,o,a){var c=JSON.parse(localStorage.getItem(o)),r=Number(e.target.closest(t).id);c.forEach((function(e,t){e.id===r&&n.splice(t,1)})),localStorage.setItem(o,JSON.stringify(n)),e.currentTarget.textContent="add to ".concat(a)}function k(e,t){var n=document.querySelector(".modal-window__close-btn"),o={addToWatched:document.querySelector(".js-movie__add-btn--watched"),addToQueue:document.querySelector(".js-movie__add-btn--queue")};o.addToWatched.addEventListener("click",t.toWatched),o.addToQueue.addEventListener("click",t.toQueue),n.addEventListener("click",e.onCloseBtn),f.addEventListener("click",e.onBackdropClick),document.addEventListener("keydown",e.onEsc)}function L(e,t){if(0!==e.length)return e.find((function(e){return e.id===t.id}))}v.addEventListener("click",(function(e){var t=_(e,".card__item",l),n=L(u,t),o=L(m,t);b(t,c,n,o),k(y,w),f.hidden=!1}));var q=a("bpxeT"),E=a("2TvXO");function T(e){localStorage.setItem(l,JSON.stringify(e)),v.innerHTML=i(JSON.parse(localStorage.getItem(l)).results)}q=a("bpxeT"),E=a("2TvXO");var I=a("dIxxU"),O="https://api.themoviedb.org/3/search/movie",N="0b11624b950ea9c4284f61844023b09c";function j(e,t,n){return C.apply(this,arguments)}function C(){return(C=e(q)(e(E).mark((function t(n,o,a){var c;return e(E).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.default.get("".concat(O,"?api_key=").concat(N,"&query=").concat(o,"&page=").concat(n,"$language=").concat(a));case 3:return c=e.sent,e.abrupt("return",c.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(response.statusText);case 10:case"end":return e.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var J=a("az1QL"),B=a("8nrFW"),M=document.querySelector(".theme__control"),Q=document.querySelector(".toolbar"),D=(document.querySelector(".js-pagination"),"light-theme"),W=localStorage.getItem(p);!function(){if(null===W)return;W===D?(document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"),M.classList.remove("checked")):(document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme"),M.classList.add("checked"))}(),Q.addEventListener("click",(function(e){e.target.classList.contains("theme__control")&&M.classList.toggle("checked");M.classList.contains("checked")?(document.body.classList.remove("light-theme"),document.body.classList.add("dark-theme"),localStorage.setItem(p,"dark-theme")):(document.body.classList.remove("dark-theme"),document.body.classList.add("light-theme"),localStorage.setItem(p,D))}));var F=document.querySelector(".js-pagination");function H(t,n){var o="",a=t-2,c=t-1,r=t+1,i=t+2;if(JSON.parse(localStorage.getItem("current_movies")).page,t>1&&(o+="<li class='arrows'>ðŸ¡¸</li>",o+="<li class='firstInt'>1</li>"),t>4&&(o+="<li class='dots'>...</li>"),t>3&&(o+="<li class='two-left'>".concat(a,"</li>")),t>2&&(o+="<li>".concat(c,"</li>")),o+="<li class='active'>".concat(t,"</li>"),n-1>t&&(o+="<li >".concat(r,"</li>")),n-2>t&&(o+="<li >".concat(i,"</li>")),n-3>t&&(o+="<li class='dots'>...</li>"),n>t&&(o+="<li class='lastInt'>".concat(n,"</li>"),o+="<li class='arrows'>ðŸ¡º</li>"),F.innerHTML=o,M.classList.contains("checked"))e(B)(F.children).forEach((function(e){e.classList.toggle("dark")}))}var U=document.querySelector(".preloader");function Y(){U.style.display="flex"}function z(){setTimeout((function(){U.style.display="none"}),500)}var A,R=document.querySelector(".js-pagination"),V=document.querySelector(".form-js"),X=document.querySelector(".form-input"),G=document.querySelector(".form__notification"),P=1;function $(){return($=e(q)(e(E).mark((function t(n){var o,a;return e(E).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),o=X.value.trim()){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,j(1,o);case 7:if(0!==(a=e.sent).results.length){e.next=12;break}return G.style.visibility="visible",setTimeout((function(){G.style.visibility="hidden"}),5e3),e.abrupt("return");case 12:P=a.page,Y(),T(a),window.onload=z(),A=o,H(a.page,a.total_pages),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(4),console.log("Error"),errorMsg;case 24:case"end":return e.stop()}}),t,null,[[4,20]])})))).apply(this,arguments)}function K(){return Z.apply(this,arguments)}function Z(){return Z=e(q)(e(E).mark((function t(){var n,o,a=arguments;return e(E).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:1,!A){e.next=12;break}return Y(),e.next=6,j(n,A);case 6:return o=e.sent,P=o.page,window.onload=z(),e.abrupt("return",o);case 12:return Y(),e.next=15,(0,J.fetchTrends)(n);case 15:return o=e.sent,window.onload=z(),P=o.page,e.abrupt("return",o);case 19:case"end":return e.stop()}}),t)}))),Z.apply(this,arguments)}V.addEventListener("submit",(function(e){return $.apply(this,arguments)})),K().then((function(e){Y(),T(e),P=e.page,window.onload=z(),H(e.page,e.total_pages)})),R.addEventListener("click",(function(e){if("LI"!==e.target.nodeName)return;if("..."===e.target.textContent)return;if("ðŸ¡¸"===e.target.textContent)console.log("Arrov<-",P),K(P-=1).then((function(e){T(e),H(e.page,e.total_pages)}));else if("ðŸ¡º"===e.target.textContent)console.log("Arrov>-",P),K(P+=1).then((function(e){T(e),H(e.page,e.total_pages)}));else{var t=e.target.textContent;console.log("in current - ",P),K(t).then((function(e){T(e),H(e.page,e.total_pages)}))}}));var ee=document.querySelector(".btn-up");ee.addEventListener("click",(function e(){var t=window.scrollY/20;window.scrollY>0&&(window.scrollBy(0,-t),setTimeout(e,0))})),window.addEventListener("scroll",(function(){var e=window.scrollY,t=document.documentElement.clientHeight;e<t?ee.classList.add("show"):ee.classList.remove("show")}));var te=document.querySelector(".lang__control"),ne=document.querySelector(".lang"),oe="english",ae=localStorage.getItem(g);!function(){if(null===ae)return;ae===oe?("en",te.classList.remove("checked")):("uk",te.classList.add("checked"))}(),ne.addEventListener("click",(function(e){e.target.classList.contains("lang__control")&&te.classList.toggle("checked");te.classList.contains("checked")?("en",localStorage.setItem(g,"ukranian")):("uk",localStorage.setItem(g,oe))}))}();
//# sourceMappingURL=index.025916cf.js.map
